{% extends 'base.html.twig' %}

{% block title %}QUIZ || PAGE CHOIX QUIZ{% endblock %}

{% block body %}
    <div class="fixed inset-0 bg-[#6E433C] bg-opacity-50 z-0 h-full w-full"></div>

    <!-- Section principale -->
    <section class="relative h-full max-w-full m-10 p-3 bg-gradient-clair-orange border-t-[7px] border-l-[7px] border-r-[15px] border-b-[15px] border-primary rounded-[42px]">

        {% block header %}
            {% include "header/headerChoice.html.twig" %}
        {% endblock %}

        {% block main %}
            <main class="flex flex-wrap justify-center gap-10">
                <!-- Choix de quiz -->

                {% for quizWithScores in quizzesWithScores %}
                    <article class="relative h-full max-w-full bg-primaryopacity border-[5px] border-primary rounded-[1rem] shadow-inner-box lg:flex-row">
                        <h3 class="text-light font-changa my-3 text-stroke text-[250%]">
                            {{ quizWithScores.quiz.name }}
                        </h3>
                        <!-- input caché pour récup idQuiz -->
                        <input type="hidden" name="idQuiz" value="{{ quizWithScores.quiz.id }}">
                        <input type="hidden" name="NameQuiz" value="{{ quizWithScores.quiz.name }}">

                        <!-- Trait décoratif -->
                        <div class="border-t-8 border-light rounded-full mx-4 mb-6"></div>

                        <div class="flex flex-col gap-4">
                            {% if quizWithScores.topScores is empty %}
                                <div class="flex flex-row items-center justify-between mx-10 p-6 bg-white border-b border-primary rounded-3xl shadow-2xl">
                                    <div class="flex flex-col ml-4">
                                        <span class="text-black text-lg font-bold">Encore aucun score</span>
                                    </div>
                                </div>
                            {% else %}
                                {% for score in quizWithScores.topScores %}
                                    <div class="flex flex-row items-center justify-between mx-10 p-6 bg-white border-b border-primary rounded-3xl shadow-2xl">
                                        <div class="flex gap-2">
                                            <span class="inline-flex items-center justify-center w-8 h-8 border-4 border-gray-custom rounded-full text-center bg-transparent">
                                                {{ loop.index }}
                                            </span>
                                            <div class="flex flex-col ml-4">
                                                <span class="text-black text-lg font-bold">{{ score.player.name }}</span>
                                                <span class="text-graycustom text-base font-semibold">{{ score.score }} points</span>
                                            </div>
                                        </div>
                                        <div>
                                            {% if loop.index == 1 %}
                                                <img src="images/Desktop - Quiz selection/Gold.png" alt="Médaille d'or" class="w-[2.5rem] inline-flex items-center justify-center ">
                                            {% elseif loop.index == 2 %}
                                                <img src="images/Desktop - Quiz selection/Silver.png" alt="Médaille d'argent" class="w-[2.5rem] inline-flex items-center justify-center ">
                                            {% elseif loop.index == 3 %}
                                                <img src="images/Desktop - Quiz selection/Bronze.png" alt="Médaille de Bronze" class="w-[2.5rem] inline-flex items-center justify-center ">
                                            {% endif %}
                                        </div>
                                    </div>
                                {% endfor %}
                            {% endif %}
                        </div>

                        <form action="{{ quizWithScores.link }}" method="get">
                            <input type="hidden" name="slug" value="{{ quizWithScores.quiz.slug }}"/>
                            <button type="submit" class=" btn btn-custom2 bg-[#541A25]:hover btn-custom2:focus transition-transform hover:scale-105">Let's go!</button>
                        </form>
                    </article>
                {% endfor %}
            </main>
        {% endblock %}

        {% block footer %}
            <form action="{{ path('app_logout') }}" method="post">
                <button type="submit" class="btn btn-custom">Déconnexion</button>
            </form>
            {% include "footer/footerChoice.html.twig" %}
        {% endblock %}

    </section>
{% endblock %}